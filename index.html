<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
<title>Robot Hand: Relax vs Hold</title>
<style>
  html, body {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    font-family: sans-serif;
  }

  /* UI Controls */
  #controls {
    position: fixed;
    bottom: 30px;
    display: flex;
    gap: 20px;
    z-index: 100;
  }
  button {
    background: #333;
    color: #fff;
    border: 1px solid #555;
    padding: 12px 24px;
    border-radius: 30px;
    font-size: 16px;
    cursor: pointer;
    transition: background 0.2s;
  }
  button:hover { background: #555; }
  button.active { background: #f0c040; color: #000; border-color: #f0c040; }

  /* SVG Styling */
  svg {
    height: 90vh;
    width: 100%;
    max-width: 600px;
    /* デバッグ用ボーダーがあれば外してください */
  }

  /* --- Robot Parts Design --- */
  .skin {
    fill: #e6e2d3; /* 画像に近いベージュ */
    stroke: #333;
    stroke-width: 3px;
  }
  .dark-part {
    fill: #666; /* メカニカルなグレー部分 */
    stroke: #333;
    stroke-width: 2px;
  }
  .joint {
    fill: #444; /* 関節の円 */
    stroke: #222;
    stroke-width: 2px;
  }
  
  /* The Phone (Blue Bar) */
  .phone {
    fill: #4da6ff;
    stroke: #222;
    stroke-width: 3px;
    rx: 12; ry: 12; /* 角丸 */
    opacity: 0;
    transform: scale(0.8);
    transform-origin: center;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* バウンス効果 */
  }

  /* --- Animation Logic (CSS Transitions) --- */
  
  /* 各パーツの基準点設定 */
  .finger-group {
    transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1);
  }
  .distal-phalanx {
    /* 指先部分 */
    transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1);
  }

  /* === HOLD STATE DEFINITIONS === */
  
  /* スマホの出現 */
  .is-holding .phone {
    opacity: 1;
    transform: scale(1);
  }

  /* 小指 (Little) */
  #little { transform-origin: 130px 380px; }
  #little .distal { transform-origin: 130px 290px; } /* 第二関節 */
  
  .is-holding #little { transform: rotate(15deg) translate(20px, 0); }
  .is-holding #little .distal { transform: rotate(-100deg); }

  /* 薬指 (Ring) */
  #ring { transform-origin: 175px 360px; }
  #ring .distal { transform-origin: 175px 260px; }
  
  .is-holding #ring { transform: rotate(8deg) translate(10px, 0); }
  .is-holding #ring .distal { transform: rotate(-95deg); }

  /* 中指 (Middle) */
  #middle { transform-origin: 225px 360px; }
  #middle .distal { transform-origin: 225px 255px; }

  .is-holding #middle { transform: rotate(-5deg); }
  .is-holding #middle .distal { transform: rotate(-95deg); }

  /* 人差し指 (Index) */
  #index { transform-origin: 275px 380px; }
  #index .distal { transform-origin: 275px 280px; }

  .is-holding #index { transform: rotate(-12deg); }
  .is-holding #index .distal { transform: rotate(-95deg); }

  /* 親指 (Thumb) */
  /* 親指は構造が違うのでグループごと動かす */
  #thumb-group {
    transform-origin: 320px 480px; /* 手首付近の付け根 */
    transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1);
  }
  .thumb-tip {
    transform-origin: 360px 420px; /* 第一関節 */
    transition: transform 0.6s;
  }

  /* 親指のHOLD: 内側に倒れ込み、指先を押さえつける */
  .is-holding #thumb-group {
    transform: rotate(-35deg) translate(-20px, -10px);
  }
  .is-holding .thumb-tip {
    transform: rotate(-20deg);
  }

</style>
</head>
<body>

<div id="controls">
  <button id="btnRelax" class="active" onclick="setState('relax')">RELAX</button>
  <button id="btnHold" onclick="setState('hold')">HOLD</button>
</div>

<svg viewBox="0 0 400 700" id="canvas">
  
  <path class="dark-part" d="M140 540 L140 650 L260 650 L260 540 Z" />
  <ellipse class="joint" cx="200" cy="540" rx="60" ry="20" /> <path class="skin" d="
    M130 380 
    L110 460 
    Q140 560 200 560 
    Q260 560 290 460 
    L320 420 
    L275 380 
    L225 360 
    L175 360 
    Z" />
  <path class="dark-part" opacity="0.5" d="M150 420 Q200 450 250 420 L240 500 Q200 520 160 500 Z" />

  <rect id="phone" class="phone" x="140" y="180" width="120" height="240" />

  <g id="little" class="finger-group">
    <rect class="skin" x="118" y="290" width="24" height="90" rx="10" />
    <circle class="joint" cx="130" cy="380" r="14" /> <g class="distal">
      <rect class="skin" x="118" y="200" width="24" height="100" rx="10" />
      <circle class="joint" cx="130" cy="290" r="12" /> </g>
  </g>

  <g id="ring" class="finger-group">
    <rect class="skin" x="163" y="260" width="24" height="100" rx="10" />
    <circle class="joint" cx="175" cy="360" r="14" />
    <g class="distal">
      <rect class="skin" x="163" y="150" width="24" height="120" rx="10" />
      <circle class="joint" cx="175" cy="260" r="12" />
    </g>
  </g>

  <g id="middle" class="finger-group">
    <rect class="skin" x="213" y="255" width="24" height="105" rx="10" />
    <circle class="joint" cx="225" cy="360" r="14" />
    <g class="distal">
      <rect class="skin" x="213" y="140" width="24" height="125" rx="10" />
      <circle class="joint" cx="225" cy="255" r="12" />
    </g>
  </g>

  <g id="index" class="finger-group">
    <rect class="skin" x="263" y="280" width="24" height="100" rx="10" />
    <circle class="joint" cx="275" cy="380" r="14" />
    <g class="distal">
      <rect class="skin" x="263" y="170" width="24" height="120" rx="10" />
      <circle class="joint" cx="275" cy="280" r="12" />
    </g>
  </g>

  <g id="thumb-group">
    <ellipse class="skin" cx="320" cy="480" rx="25" ry="35" transform="rotate(-20 320 480)"/>
    
    <rect class="skin" x="305" y="410" width="30" height="70" rx="12" transform="rotate(-15 320 480)" />
    
    <g class="thumb-tip">
      <rect class="skin" x="315" y="340" width="28" height="70" rx="10" transform="rotate(-15 329 410)" />
      <circle class="joint" cx="329" cy="410" r="13" /> </g>
  </g>

</svg>

<script>
  function setState(state) {
    const canvas = document.getElementById('canvas');
    const btnRelax = document.getElementById('btnRelax');
    const btnHold = document.getElementById('btnHold');

    if (state === 'hold') {
      canvas.classList.add('is-holding');
      btnHold.classList.add('active');
      btnRelax.classList.remove('active');
    } else {
      canvas.classList.remove('is-holding');
      btnRelax.classList.add('active');
      btnHold.classList.remove('active');
    }
  }
</script>

</body>
</html>
